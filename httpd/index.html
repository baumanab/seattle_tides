<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
  <title >Carkeek to Golden Gardens Low Tide Hike Charts</title>
  <link rel="stylesheet" href="css/tide_charts.css">
  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
</head>

<body>

  <div id= "intro" class="info">
    <p>The explanatory data visualization below is in fulfilment of the requirements for Udacity's Data Analyst Nanodegree Project 6: "Make an Effective Data Visualization." 
       The data visualization is designed to help the user determine when to make the ~2 mile hike between two Seattle Parks, Carkeek and Golden Gardens, 
       via beach exposed at low tide.  A chart is displayed for each of the next four viable days, from the selected day (initial visualization is the current day).
       The tide data in feet as a function of time (local) is represented by the solid line.  The viable hiking window is bracketed by two vertical lines and 
       highlighted, with the circle representing the latest start time for a viable hike.  What are the criteria for a viable hike? I'm so glad you asked.  
       They are 1 hour of daylight and 1 hour of exposed beach (tide level NGT 2 feet).
	</p>

    <p>You can learn more about this hike, here: <a href="https://sites.google.com/site/seattlemetrobushiking/main-page/in-city-hikes/carkeek-park-and-beach-walk-to-ballard" target="_blank">Seattle Metro Bus Hiking</a>.  
	   If you are trying to determine when to make the hike between two of Seattle's most beautiful parks, you may find the interactive features helpful.  You 
	   may enter or select a date, then submit it via the button that says.......wait for it....submit.  Hovering on the tide level line will display a tooltip 
	   which gives the local time to the nearest 6 minute interval and the tide level to the nearest foot.
    </p>
       
    <p>The data is currently static, representing processed data from August 21st 2015 through August 20th 2016, and is not yet periodically updated.
	   Go ahead and try past dates, to see how this works.
    </p>
  </div>
  
  <div id="main_figure"> 
  
    <p id= "chart_title">	
	</p>

    <form id= "submit_form" name="myform" onSubmit="return handleClick()">
      <input name="Submit"  type="submit" value="Submit" >
      <input type="date" id="myVal" min= "2015-08-21" max="2016-08-19" placeholder= "mm/dd/yyyy">
    </form>


    <div id="chartContainer">
      <script src="/packages/dimple/lib/d3.v3.4.8.js"></script>
      <script src="/packages/dimple/dist/dimple.v2.1.6.js"></script>
      <script type="text/javascript" src='js/lodash.js'></script>
      <script type="text/javascript" src='js/moment.js'></script>
      <script type="text/javascript" src='js/moment-with-locales.js'></script>
      <script type="text/javascript" src='js/tide_charts.js'></script> 
  
      <script type="text/javascript">	
    
	  // create svg element
	  var svg = dimple.newSvg("#chartContainer", 1200, 600);
	
	  // get the current time and parse
	  now = moment();
	  formatted_now = now.format("YYYY-MM-DD")

	
	   // draw the chart
	  draw_charts(val = formatted_now);
	  
      </script>
	</div>
	
	<p id="figure_text" class="info">
	The solid line represents the tide level ,in feet, as function of time (local).  The dashed vertical lines represent the viable hike window 
	(daylight present and 1 hour of tide level NGT 2 feet).  The circle indicates the latest start time. 
    </p>	
  </div> 

  <div id="information" class="info">

    <p> All code and code history can be accessed via the projects Github Repo <a href="https://github.com/baumanab/seattle_tides" target="_blank">Carkeek Tides Github Repo</a>. 
	    Data was acquired and processed via python, primarily using the urllib2 and PANDAS libraries.  A visualization of the processed data was constructed 
		from Javascript (.js) using the Dimple, D3, and Moment libraries.  A data processing and exploration ipython notebook is available in the project 
		Github Repo with an	html version here <a href="sandbox.html" target="_blank">Data Wrangling Sandbox</a>.  
		
		<h3>The general data acquisition and processing steps are: </h3>
 
	 <ul>

		<li> Query NOAA data (<a href="https://tidesandcurrents.noaa.gov/api/" target="_blank">NOAA COOPS API</a>) for the main Seattle station, returning tide level predictions for 1 year, at 6 minute intervals, as 
		     a JSON (Javascript Object Notation) object. </li>
		<li> Convert tide data to a PANDAS DataFrame (DF) </li>
		<li> Transform tide levels to those at Carkeek park (main station level + 5.5%) </li>
		<li> Calculate sunrise and sunset times at Carkeek park </li>
		<li> Determine when hiking criteria are met (1 hour of daylight, 1 hour of exposed beach) as well as latest start time. </li>
		<li> Export the data as a TSV (Tab Separated Values) </li>
	 </ul>
	

    <h3> This project is still ongoing and the to-do list inclues:</h3>
	 <ul>
		<li> Refactor JS, particularly breaking the charting function into pieces </li>
		<li> Refactor and repackage python code for server execution.  The sandbox code is in the order I took to solve particular data processing challenges and 
		     should be reorganized and aggregated for efficiency and readability. </li>
		<li> Extend the exploratory data analysis (EDA) using R to summarize and visually explore the data, with particular focus on distribution of viable days. </li>
		<li> Add a color code to the drop down calendar indicating viable days, to help the user select a start day. </li>
		<li> Increase the precision of the tide level tool tip to 1 floating decimal </li>
		<li> Set up the query and data processing on this server to update the data each week. </li>
		<li> Apply a responsive web framework (bootstrap or flexbox) and re-style this site. </li>
		<li> Re-work the chart svg and draw function for responsiveness. </li>
	 </ul>
	
    <h3>Disclaimer and Assumptions:</h3>

	 <ul>
		<li> Daylight estimated as 30 minutes from sunrise to sunset </li>
		<li> Sufficient exposed beach: tide level NGT 2ft </li>
		<li> Weather and wave conditions were not considered </li>
		<li> Distance of hike is ~ 2 miles </li>
		<li> Time to make the hike estimated at ~ 1 hour based on distance and the length of time it takes an average adult to walk a mile 
		     (15 minutes) + time to smell the roses, or geoducks as the case may be. </li>
		<li> use this data at your own risk, the results and assumptions need testing.  I plan to test them personally on nice, sunny days :) </li>
	 </ul>
	</p>
  </div>

</body>
</html>
